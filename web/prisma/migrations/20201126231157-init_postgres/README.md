# Migration `20201126231157-init_postgres`

This migration has been generated by luizfverissimo at 11/26/2020, 8:11:57 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "public"."Offer" ADD COLUMN "coupon" text   NOT NULL DEFAULT E'SEM',
ADD COLUMN "affiliateId" integer   NOT NULL DEFAULT 4

CREATE TABLE "public"."AffiliateLink" (
"id" SERIAL,
"store" text   NOT NULL ,
"affiliateLink" text   NOT NULL ,
PRIMARY KEY ("id")
)

ALTER TABLE "public"."Offer" ADD FOREIGN KEY("affiliateId")REFERENCES "public"."AffiliateLink"("id") ON DELETE CASCADE ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20201121175626-affiliate_changes..20201126231157-init_postgres
--- datamodel.dml
+++ datamodel.dml
@@ -1,53 +1,52 @@
-// This is your Prisma schema file,
-// learn more about it in the docs: https://pris.ly/d/prisma-schema
-
-datasource db {
-  provider = "sqlite"
-  url = "***"
-}
-
-generator client {
-  provider = "prisma-client-js"
-}
-
-model Offer {
-  id Int @id @default(autoincrement())
-  active Boolean
-  name String
-  urlImage String
-  urlOffer String
-  description String
-  offerPrice Int
-  normalPrice Int
-  offerText String
-  store String
-  coupon String @default("SEM")
-  affiliateId Int @default(4)
-  affiliate AffiliateLink @relation(fields: [affiliateId], references: [id])
-  createdAt String
-  createdAtDb DateTime @default(now())
-  author User @relation(fields: [authorId], references: [id])
-  authorId Int
-}
-
-model User {
-  id Int @id @default(autoincrement())
-  name String
-  email String @unique
-  role String @default("USER")
-  password String
-  createdAtDb DateTime @default(now())
-}
-
-model OfferSuggestion {
-  id Int @id @default(autoincrement())
-  offerLink String
-  createdAtDb DateTime @default(now())
-  createdAt String
-}
-
-model AffiliateLink {
-  id Int @id @default(autoincrement())
-  store String
-  affiliateLink String
-}
+generator client {
+  provider = "prisma-client-js"
+}
+
+datasource db {
+  provider = "postgresql"
+  url = "***"
+}
+
+model Offer {
+  id          Int           @id @default(autoincrement())
+  active      Boolean
+  name        String
+  urlImage    String
+  urlOffer    String
+  description String
+  offerPrice  Int
+  normalPrice Int
+  offerText   String
+  store       String
+  createdAt   String
+  authorId    Int
+  createdAtDb DateTime      @default(now())
+  coupon      String        @default("SEM")
+  affiliateId Int           @default(4)
+  affiliate   AffiliateLink @relation(fields: [affiliateId], references: [id])
+  author      User          @relation(fields: [authorId], references: [id])
+}
+
+model User {
+  id          Int      @id @default(autoincrement())
+  name        String
+  email       String   @unique
+  role        String   @default("USER")
+  password    String
+  createdAtDb DateTime @default(now())
+  Offer       Offer[]
+}
+
+model OfferSuggestion {
+  id          Int      @id @default(autoincrement())
+  offerLink   String
+  createdAtDb DateTime @default(now())
+  createdAt   String
+}
+
+model AffiliateLink {
+  id            Int     @id @default(autoincrement())
+  store         String
+  affiliateLink String
+  Offer         Offer[]
+}
```


